<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta
        name="viewport"
        content="width=device-width,initial-scale=1.0,minimum-scale=1.0"
    />
    <title>Aria â€” Spotify playlist generator</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
</head>
<body>
<div class="page">
    <div class="shell">

        <!-- HEADER -->
        <header class="header-row">
            <div class="sphere-wrapper aria-avatar-wrapper">
                <div class="sphere aria-sphere"></div>
            </div>

            <div class="aria-meta">
                <div class="aria-topline">
                    <div>Aria</div>
                    <div class="aria-badge">AI generated playlists</div>
                </div>
            </div>
        </header>

        <!-- MAIN INPUT CARD -->
        <section class="main-card">
            <div class="headline">
                Describe your vibe
            </div>

            <form class="generate-form" id="generate-form" action="/generate_async" method="post">
                <div class="input-shell">
                    <textarea
                        class="prompt-input"
                        name="prompt"
                        id="prompt"
                        rows="4"
                        placeholder="A herd of wild boars pounding their hooves in the forest to 180 BPM hard techno."
                    >{{ pending_prompt }}</textarea>
                </div>

                <button class="generate-btn" type="submit" id="generate-btn">
                    Generate my playlist
                </button>
            </form>

            <div class="tiny-legal">
                Aria will create the playlist in your Spotify.
            </div>
        </section>

        <!-- RESULT CARD -->
        <section class="result-card" id="result-card">
            <div class="playlist-headrow">
                <div class="playlist-name" id="playlist-name">
                    <!-- filled dynamically -->
                </div>

                <a
                    class="playlist-url-btn"
                    id="playlist-url-btn"
                    href="#"
                    target="_blank"
                    rel="noopener"
                    style="display:none;"
                >
                    Open in Spotify
                </a>
            </div>

            <div class="result-summary-block" id="result-summary" style="display:none;">
                <!-- mood text -->
            </div>
        </section>

        <footer class="page-footer">
            <span class="brand">Aria</span>
            <div>Create your soundtrack.</div>
        </footer>

    </div>
</div>

<!-- LOADING OVERLAY -->
<div class="loading-overlay" role="alert" aria-live="polite" id="loading-overlay">
    <div class="loading-card">
        <div class="sphere-wrapper loader-avatar-wrapper">
            <div class="sphere loader-sphere"></div>
        </div>

        <div class="loader-title">Aria is digging for gems</div>
        <div class="loader-step" id="loader-step">Building your playlist...</div>
        <div class="progress-bar-shell">
            <div class="progress-bar-fill"></div>
        </div>
    </div>
</div>
    <script src="{{ url_for('static', filename='js/home.js') }}" defer></script>
    <script>
        window.ARIA_SPOTIFY_CONNECTED = {{ connected | tojson }};
        window.ARIA_INITIAL_RESULT = {{ result | tojson }};
        window.ARIA_PENDING_PROMPT = {{ pending_prompt | tojson }};
    </script>

</body>
</html>
